{"ast":null,"code":"import _regeneratorRuntime from\"C:/my_data/109-1_Web Programming/web-programming-final/own/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/my_data/109-1_Web Programming/web-programming-final/own/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/my_data/109-1_Web Programming/web-programming-final/own/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{useState,useEffect}from'react';import clsx from'clsx';import axios from'axios';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Button from'@material-ui/core/Button';import Grid from'@material-ui/core/Grid';import Paper from'@material-ui/core/Paper';import Link from'@material-ui/core/Link';import TextField from'@material-ui/core/TextField';import FormControl from'@material-ui/core/FormControl';import Title from'./Title';import TextareaAutosize from'react-textarea-autosize';var API_ROOT='http://localhost:4000/api';var instance=axios.create({baseURL:API_ROOT});var useStyles=makeStyles(function(theme){return{paper:{padding:theme.spacing(2),display:'flex',overflow:'auto',flexDirection:'column'},fixedHeight:{height:420},buttons:{display:'flex',justifyContent:'flex-end'},button:{marginTop:theme.spacing(3),marginLeft:theme.spacing(1)},formControl:{margin:theme.spacing(1),width:'100%'}};});export default function AnnounceForm(props){var classes=useStyles();var fixedHeightPaper=clsx(classes.paper,classes.fixedHeight);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),announceYear=_useState2[0],setAnnounceYear=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),announceMonth=_useState4[0],setAnnounceMonth=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),announceDate=_useState6[0],setAnnounceDate=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),announceTitle=_useState8[0],setAnnounceTitle=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),announceContent=_useState10[0],setAnnounceContent=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var dateString,transDate,_yield$instance$post,success;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();dateString=announceYear+\"-\"+announceMonth+\"-\"+announceDate;transDate=new Date(dateString);_context.next=5;return instance.post('/createAnnouncement',{'cupID':props.cupNum,'title':announceTitle,'date':transDate,'content':announceContent});case 5:_yield$instance$post=_context.sent;success=_yield$instance$post.data;setAnnounceContent(\"\");setAnnounceDate(\"\");setAnnounceMonth(\"\");setAnnounceYear(\"\");setAnnounceTitle(\"\");alert(\"新增公告成功！\");case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Paper,{className:fixedHeightPaper,children:/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Title,{children:\"\\u65B0\\u589E\\u516C\\u544A\"}),/*#__PURE__*/_jsxs(FormControl,{className:classes.formControl,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{required:true,id:\"title\",name:\"title\",label:\"\\u6A19\\u984C\",fullWidth:true,autoComplete:\"shipping address-line1\",style:{height:80},value:announceTitle,onInput:function onInput(e){return setAnnounceTitle(e.target.value);}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,style:{height:100},children:/*#__PURE__*/_jsx(TextField,{required:true,id:\"year\",name:\"year\",label:\"\\u5E74 YYYY\",fullWidth:true,autoComplete:\"given-name\",value:announceYear,onInput:function onInput(e){return setAnnounceYear(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(TextField,{required:true,id:\"month\",name:\"month\",label:\"\\u6708 MM\",fullWidth:true,autoComplete:\"given-name\",value:announceMonth,onInput:function onInput(e){return setAnnounceMonth(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(TextField,{required:true,id:\"day\",name:\"day\",label:\"\\u65E5 DD\",fullWidth:true,autoComplete:\"given-name\",value:announceDate,onInput:function onInput(e){return setAnnounceDate(e.target.value);}})})]}),/*#__PURE__*/_jsx(TextareaAutosize,{minRows:6,maxRows:9,placeholder:\"\\u516C\\u544A\\u5167\\u5BB9\",name:\"textvalue\",value:announceContent,onInput:function onInput(e){return setAnnounceContent(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",className:classes.button,type:\"submit\",onClick:handleSubmit,children:\"\\u78BA\\u8A8D\\u516C\\u544A\"})]})});}","map":{"version":3,"sources":["C:/my_data/109-1_Web Programming/web-programming-final/own/src/AnnounceForm.js"],"names":["React","useState","useEffect","clsx","axios","makeStyles","Typography","Button","Grid","Paper","Link","TextField","FormControl","Title","TextareaAutosize","API_ROOT","instance","create","baseURL","useStyles","theme","paper","padding","spacing","display","overflow","flexDirection","fixedHeight","height","buttons","justifyContent","button","marginTop","marginLeft","formControl","margin","width","AnnounceForm","props","classes","fixedHeightPaper","announceYear","setAnnounceYear","announceMonth","setAnnounceMonth","announceDate","setAnnounceDate","announceTitle","setAnnounceTitle","announceContent","setAnnounceContent","handleSubmit","event","preventDefault","dateString","transDate","Date","post","cupNum","success","data","alert","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState, useEffect } from 'react'\r\nimport clsx from 'clsx';\r\nimport axios from 'axios'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Link from '@material-ui/core/Link';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Title from './Title';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\n\r\nconst API_ROOT = 'http://localhost:4000/api'\r\nconst instance = axios.create({\r\n  baseURL: API_ROOT\r\n})\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 420,\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(3),\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    width: '100%'\r\n  },\r\n}));\r\n\r\nexport default function AnnounceForm(props) {\r\n  const classes = useStyles();\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  const [announceYear, setAnnounceYear] = useState(\"\")\r\n  const [announceMonth, setAnnounceMonth] = useState(\"\")\r\n  const [announceDate, setAnnounceDate] = useState(\"\")\r\n  const [announceTitle, setAnnounceTitle] = useState(\"\")\r\n  const [announceContent, setAnnounceContent] = useState(\"\")\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const dateString = announceYear + \"-\" + announceMonth + \"-\" + announceDate\r\n    const transDate = new Date(dateString)\r\n\r\n    const { data: success } = await instance.post('/createAnnouncement', {\r\n      'cupID': props.cupNum,\r\n      'title': announceTitle,\r\n      'date': transDate,\r\n      'content': announceContent\r\n    })\r\n\r\n    setAnnounceContent(\"\")\r\n    setAnnounceDate(\"\")\r\n    setAnnounceMonth(\"\")\r\n    setAnnounceYear(\"\")\r\n    setAnnounceTitle(\"\")\r\n    alert(\"新增公告成功！\")\r\n  }\r\n\r\n  return (\r\n    <Paper className={fixedHeightPaper}>\r\n      <Grid item xs={12}>\r\n        <Title>新增公告</Title>\r\n        <FormControl className={classes.formControl} onSubmit={handleSubmit}>\r\n          <TextField\r\n            required\r\n            id=\"title\"\r\n            name=\"title\"\r\n            label=\"標題\"\r\n            fullWidth\r\n            autoComplete=\"shipping address-line1\"\r\n            style={{ height: 80 }}\r\n            value={announceTitle}\r\n            onInput={e => setAnnounceTitle(e.target.value)}\r\n          />\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={4} style={{ height: 100 }}>\r\n              <TextField\r\n                required\r\n                id=\"year\"\r\n                name=\"year\"\r\n                label=\"年 YYYY\"\r\n                fullWidth\r\n                autoComplete=\"given-name\"\r\n                value={announceYear}\r\n                onInput={e => setAnnounceYear(e.target.value)}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                required\r\n                id=\"month\"\r\n                name=\"month\"\r\n                label=\"月 MM\"\r\n                fullWidth\r\n                autoComplete=\"given-name\"\r\n                value={announceMonth}\r\n                onInput={e => setAnnounceMonth(e.target.value)}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                required\r\n                id=\"day\"\r\n                name=\"day\"\r\n                label=\"日 DD\"\r\n                fullWidth\r\n                autoComplete=\"given-name\"\r\n                value={announceDate}\r\n                onInput={e => setAnnounceDate(e.target.value)}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <TextareaAutosize\r\n            minRows={6}\r\n            maxRows={9}\r\n            placeholder=\"公告內容\"\r\n            name=\"textvalue\"\r\n            value={announceContent}\r\n            onInput={e => setAnnounceContent(e.target.value)}\r\n          />\r\n\r\n        </FormControl>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}\r\n          type=\"submit\"\r\n          onClick={handleSubmit}\r\n        >\r\n          確認公告\r\n        </Button>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}