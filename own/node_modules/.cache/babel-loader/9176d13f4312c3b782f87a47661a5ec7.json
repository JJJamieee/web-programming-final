{"ast":null,"code":"import _regeneratorRuntime from\"C:/my_data/109-1_Web Programming/web-programming-final/own/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/my_data/109-1_Web Programming/web-programming-final/own/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/my_data/109-1_Web Programming/web-programming-final/own/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{useState,useEffect}from'react';import axios from'axios';import{makeStyles}from'@material-ui/core/styles';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import Button from'@material-ui/core/Button';import EditGame from'./EditGame';import SortSchedule from'./SortSchedule';import Typography from'@material-ui/core/Typography';var API_ROOT='http://localhost:4000/api';var instance=axios.create({baseURL:API_ROOT});var useStyles=makeStyles({table:{minWidth:650},next_button:{float:'right'}});function createData(date,time,match,place){return{date:date,time:time,match:match,place:place};}var rows=[createData('3/4','12:40','電機對土木','新生'),createData('3/4','18:00','機械對生機','中央'),createData('3/4','19:00','資工對日文','中央')];export default function Schedule(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),game=_useState2[0],setGame=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),changePage=_useState4[0],setChagePage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cupSchedule=_useState6[0],setCupSchedule=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),curPage=_useState8[0],setCurPage=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),pageNum=_useState10[0],setPageNum=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),sortDateList=_useState12[0],setSortDateList=_useState12[1];var classes=useStyles();var handleEdit=function handleEdit(gameInstance){setChagePage(true);setGame(gameInstance);};var getSchedule=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var _yield$instance$get,schedule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return instance.get('/getSchedule',{params:{id:id}});case 2:_yield$instance$get=_context.sent;schedule=_yield$instance$get.data;setCupSchedule(schedule.contents);setSortDateList([]);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getSchedule(_x){return _ref.apply(this,arguments);};}();var backToSchedule=function backToSchedule(){setChagePage(false);setCupSchedule([]);};useEffect(function(){if(!cupSchedule.length)getSchedule(props.cupNum);if(!sortDateList.length){var dayList=[];cupSchedule.map(function(row){return dayList.push(row.date.slice(0,10));});var daySet=new Set(dayList);var uniDateList=Array.from(daySet);setPageNum(uniDateList.length);setSortDateList(SortSchedule(uniDateList));}});var handlePreviost=function handlePreviost(){if(curPage>0)setCurPage(function(curPage){return curPage-1;});};var handleNext=function handleNext(){if(curPage<pageNum-1)setCurPage(function(curPage){return curPage+1;});};return/*#__PURE__*/_jsx(\"div\",{children:!changePage?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u8CFD\\u7A0B\"}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h6\",color:\"inherit\",noWrap:true,className:classes.title,style:{textAlign:\"center\"},children:sortDateList[curPage]}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:handlePreviost,children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{className:classes.next_button,color:\"primary\",onClick:handleNext,children:\"Next\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{className:classes.table,\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"\\u6BD4\\u8CFD\\u65E5\\u671F\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"\\u6BD4\\u8CFD\\u6642\\u9593\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"\\u5C0D\\u6230\\u7D44\\u5408\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"\\u5730\\u9EDE\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"\\u7DE8\\u8F2F\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:cupSchedule.map(function(row,index){return row.date.slice(0,10)===sortDateList[curPage]?/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:row.date.slice(0,10)}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:row.time}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:row.match}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:row.place}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:function onClick(){return handleEdit(row);},children:\"\\u7DE8\\u8F2F\"})})]},index):/*#__PURE__*/_jsx(React.Fragment,{});})})]})})]}):/*#__PURE__*/_jsx(EditGame,{game:game,cupNum:props.cupNum,backToSchedule:backToSchedule})});}","map":{"version":3,"sources":["C:/my_data/109-1_Web Programming/web-programming-final/own/src/Editschedule.js"],"names":["React","useState","useEffect","axios","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","EditGame","SortSchedule","Typography","API_ROOT","instance","create","baseURL","useStyles","table","minWidth","next_button","float","createData","date","time","match","place","rows","Schedule","props","game","setGame","changePage","setChagePage","cupSchedule","setCupSchedule","curPage","setCurPage","pageNum","setPageNum","sortDateList","setSortDateList","classes","handleEdit","gameInstance","getSchedule","id","get","params","schedule","data","contents","backToSchedule","length","cupNum","dayList","map","row","push","slice","daySet","Set","uniDateList","Array","from","handlePreviost","handleNext","title","textAlign","index"],"mappings":"wmBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,2BAAjB,CACA,GAAMC,CAAAA,QAAQ,CAAGd,KAAK,CAACe,MAAN,CAAa,CAC1BC,OAAO,CAAEH,QADiB,CAAb,CAAjB,CAIA,GAAMI,CAAAA,SAAS,CAAGhB,UAAU,CAAC,CACzBiB,KAAK,CAAE,CACHC,QAAQ,CAAE,GADP,CADkB,CAIzBC,WAAW,CAAE,CACTC,KAAK,CAAE,OADE,CAJY,CAAD,CAA5B,CASA,QAASC,CAAAA,UAAT,CAAoBC,IAApB,CAA0BC,IAA1B,CAAgCC,KAAhC,CAAuCC,KAAvC,CAA8C,CAC1C,MAAO,CAAEH,IAAI,CAAJA,IAAF,CAAQC,IAAI,CAAJA,IAAR,CAAcC,KAAK,CAALA,KAAd,CAAqBC,KAAK,CAALA,KAArB,CAAP,CACH,CAED,GAAMC,CAAAA,IAAI,CAAG,CACTL,UAAU,CAAC,KAAD,CAAQ,OAAR,CAAiB,OAAjB,CAA0B,IAA1B,CADD,CAETA,UAAU,CAAC,KAAD,CAAQ,OAAR,CAAiB,OAAjB,CAA0B,IAA1B,CAFD,CAGTA,UAAU,CAAC,KAAD,CAAQ,OAAR,CAAiB,OAAjB,CAA0B,IAA1B,CAHD,CAAb,CAMA,cAAe,SAASM,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,eACZ/B,QAAQ,CAAC,EAAD,CADI,wCAC7BgC,IAD6B,eACvBC,OADuB,8BAEDjC,QAAQ,CAAC,KAAD,CAFP,yCAE7BkC,UAF6B,eAEjBC,YAFiB,8BAGEnC,QAAQ,CAAC,EAAD,CAHV,yCAG7BoC,WAH6B,eAGhBC,cAHgB,8BAINrC,QAAQ,CAAC,CAAD,CAJF,yCAI7BsC,OAJ6B,eAIpBC,UAJoB,8BAKNvC,QAAQ,CAAC,CAAD,CALF,0CAK7BwC,OAL6B,gBAKpBC,UALoB,gCAMIzC,QAAQ,CAAC,EAAD,CANZ,2CAM7B0C,YAN6B,gBAMfC,eANe,gBAOpC,GAAMC,CAAAA,OAAO,CAAGzB,SAAS,EAAzB,CAEA,GAAM0B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,YAAD,CAAkB,CACjCX,YAAY,CAAC,IAAD,CAAZ,CACAF,OAAO,CAACa,YAAD,CAAP,CACH,CAHD,CAKA,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,EAAP,yKAEiBhC,CAAAA,QAAQ,CAACiC,GAAT,CAAa,cAAb,CAA6B,CAAEC,MAAM,CAAE,CAAEF,EAAE,CAAFA,EAAF,CAAV,CAA7B,CAFjB,0CAEFG,QAFE,qBAERC,IAFQ,CAIhBf,cAAc,CAACc,QAAQ,CAACE,QAAV,CAAd,CACAV,eAAe,CAAC,EAAD,CAAf,CALgB,sDAAH,kBAAXI,CAAAA,WAAW,4CAAjB,CAQA,GAAMO,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzBnB,YAAY,CAAC,KAAD,CAAZ,CACAE,cAAc,CAAC,EAAD,CAAd,CACH,CAHD,CAKApC,SAAS,CAAC,UAAM,CACZ,GAAI,CAACmC,WAAW,CAACmB,MAAjB,CACIR,WAAW,CAAChB,KAAK,CAACyB,MAAP,CAAX,CACJ,GAAI,CAACd,YAAY,CAACa,MAAlB,CAA0B,CACtB,GAAME,CAAAA,OAAO,CAAG,EAAhB,CACArB,WAAW,CAACsB,GAAZ,CAAgB,SAACC,GAAD,QACZF,CAAAA,OAAO,CAACG,IAAR,CAAaD,GAAG,CAAClC,IAAJ,CAASoC,KAAT,CAAe,CAAf,CAAkB,EAAlB,CAAb,CADY,EAAhB,EAGA,GAAMC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,GAAJ,CAAQN,OAAR,CAAf,CACA,GAAMO,CAAAA,WAAW,CAAGC,KAAK,CAACC,IAAN,CAAWJ,MAAX,CAApB,CACArB,UAAU,CAACuB,WAAW,CAACT,MAAb,CAAV,CACAZ,eAAe,CAAC9B,YAAY,CAACmD,WAAD,CAAb,CAAf,CACH,CACJ,CAbQ,CAAT,CAeA,GAAMG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,GAAI7B,OAAO,CAAG,CAAd,CACIC,UAAU,CAAC,SAACD,OAAD,QAAaA,CAAAA,OAAO,CAAG,CAAvB,EAAD,CAAV,CACP,CAHD,CAKA,GAAM8B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAI9B,OAAO,CAAGE,OAAO,CAAG,CAAxB,CACID,UAAU,CAAC,SAACD,OAAD,QAAaA,CAAAA,OAAO,CAAG,CAAvB,EAAD,CAAV,CACP,CAHD,CAKA,mBACI,qBACK,CAACJ,UAAD,cACG,MAAC,KAAD,CAAO,QAAP,yBACI,oCADJ,cAEI,KAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,CAAwC,KAAK,CAAC,SAA9C,CAAwD,MAAM,KAA9D,CAA+D,SAAS,CAAEU,OAAO,CAACyB,KAAlF,CAAyF,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAhG,UACK5B,YAAY,CAACJ,OAAD,CADjB,EAFJ,cAKI,KAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,CAAwB,OAAO,CAAE6B,cAAjC,sBALJ,cAMI,KAAC,MAAD,EAAQ,SAAS,CAAEvB,OAAO,CAACtB,WAA3B,CAAwC,KAAK,CAAC,SAA9C,CAAwD,OAAO,CAAE8C,UAAjE,kBANJ,cAOI,KAAC,cAAD,EAAgB,SAAS,CAAE1D,KAA3B,uBACI,MAAC,KAAD,EAAO,SAAS,CAAEkC,OAAO,CAACxB,KAA1B,CAAiC,aAAW,cAA5C,wBACI,KAAC,SAAD,wBACI,MAAC,QAAD,yBACI,KAAC,SAAD,uCADJ,cAEI,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,sCAFJ,cAGI,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,sCAHJ,cAII,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,0BAJJ,cAKI,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,0BALJ,GADJ,EADJ,cAUI,KAAC,SAAD,WACKgB,WAAW,CAACsB,GAAZ,CAAgB,SAACC,GAAD,CAAMY,KAAN,QACbZ,CAAAA,GAAG,CAAClC,IAAJ,CAASoC,KAAT,CAAe,CAAf,CAAkB,EAAlB,IAA0BnB,YAAY,CAACJ,OAAD,CAAtC,cACI,MAAC,QAAD,yBACI,KAAC,SAAD,EAAW,SAAS,CAAC,IAArB,CAA0B,KAAK,CAAC,KAAhC,UACKqB,GAAG,CAAClC,IAAJ,CAASoC,KAAT,CAAe,CAAf,CAAkB,EAAlB,CADL,EADJ,cAII,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BF,GAAG,CAACjC,IAA9B,EAJJ,cAKI,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BiC,GAAG,CAAChC,KAA9B,EALJ,cAMI,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BgC,GAAG,CAAC/B,KAA9B,EANJ,cAOI,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,yBAAMiB,CAAAA,UAAU,CAACc,GAAD,CAAhB,EAA/B,0BADJ,EAPJ,GAAeY,KAAf,CADJ,cAaI,KAAC,KAAD,CAAO,QAAP,IAdS,EAAhB,CADL,EAVJ,GADJ,EAPJ,GADH,cAyCG,KAAC,QAAD,EAAU,IAAI,CAAEvC,IAAhB,CAAsB,MAAM,CAAED,KAAK,CAACyB,MAApC,CAA4C,cAAc,CAAEF,cAA5D,EA1CR,EADJ,CA8CH","sourcesContent":["import React from 'react';\r\nimport { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport EditGame from './EditGame'\r\nimport SortSchedule from './SortSchedule'\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst API_ROOT = 'http://localhost:4000/api'\r\nconst instance = axios.create({\r\n    baseURL: API_ROOT\r\n})\r\n\r\nconst useStyles = makeStyles({\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n    next_button: {\r\n        float: 'right',\r\n    },\r\n});\r\n\r\nfunction createData(date, time, match, place) {\r\n    return { date, time, match, place };\r\n}\r\n\r\nconst rows = [\r\n    createData('3/4', '12:40', '電機對土木', '新生'),\r\n    createData('3/4', '18:00', '機械對生機', '中央'),\r\n    createData('3/4', '19:00', '資工對日文', '中央'),\r\n];\r\n\r\nexport default function Schedule(props) {\r\n    const [game, setGame] = useState({})\r\n    const [changePage, setChagePage] = useState(false)\r\n    const [cupSchedule, setCupSchedule] = useState([])\r\n    const [curPage, setCurPage] = useState(0);\r\n    const [pageNum, setPageNum] = useState(0);\r\n    const [sortDateList, setSortDateList] = useState([])\r\n    const classes = useStyles();\r\n\r\n    const handleEdit = (gameInstance) => {\r\n        setChagePage(true)\r\n        setGame(gameInstance)\r\n    }\r\n\r\n    const getSchedule = async (id) => {\r\n        // TODO : get current cup schedule\r\n        const { data: schedule } = await instance.get('/getSchedule', { params: { id } })\r\n\r\n        setCupSchedule(schedule.contents)\r\n        setSortDateList([])\r\n    }\r\n\r\n    const backToSchedule = () => {\r\n        setChagePage(false)\r\n        setCupSchedule([])\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!cupSchedule.length)\r\n            getSchedule(props.cupNum)\r\n        if (!sortDateList.length) {\r\n            const dayList = []\r\n            cupSchedule.map((row) => (\r\n                dayList.push(row.date.slice(0, 10))\r\n            ))\r\n            const daySet = new Set(dayList);\r\n            const uniDateList = Array.from(daySet)\r\n            setPageNum(uniDateList.length)\r\n            setSortDateList(SortSchedule(uniDateList))\r\n        }\r\n    })\r\n\r\n    const handlePreviost = () => {\r\n        if (curPage > 0)\r\n            setCurPage((curPage) => curPage - 1)\r\n    }\r\n\r\n    const handleNext = () => {\r\n        if (curPage < pageNum - 1)\r\n            setCurPage((curPage) => curPage + 1)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!changePage ?\r\n                <React.Fragment>\r\n                    <h2>賽程</h2>\r\n                    <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" noWrap className={classes.title} style={{ textAlign: \"center\" }}>\r\n                        {sortDateList[curPage]}\r\n                    </Typography>\r\n                    <Button color=\"primary\" onClick={handlePreviost}>Previous</Button>\r\n                    <Button className={classes.next_button} color=\"primary\" onClick={handleNext}>Next</Button>\r\n                    <TableContainer component={Paper}>\r\n                        <Table className={classes.table} aria-label=\"simple table\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>比賽日期</TableCell>\r\n                                    <TableCell align=\"right\">比賽時間</TableCell>\r\n                                    <TableCell align=\"right\">對戰組合</TableCell>\r\n                                    <TableCell align=\"right\">地點</TableCell>\r\n                                    <TableCell align=\"right\">編輯</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {cupSchedule.map((row, index) => (\r\n                                    row.date.slice(0, 10) === sortDateList[curPage] ?\r\n                                        <TableRow key={index}>\r\n                                            <TableCell component=\"th\" scope=\"row\">\r\n                                                {row.date.slice(0, 10)}\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">{row.time}</TableCell>\r\n                                            <TableCell align=\"right\">{row.match}</TableCell>\r\n                                            <TableCell align=\"right\">{row.place}</TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                <Button type=\"button\" onClick={() => handleEdit(row)}>編輯</Button>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                        :\r\n                                        <React.Fragment></React.Fragment>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                </React.Fragment>\r\n                :\r\n                <EditGame game={game} cupNum={props.cupNum} backToSchedule={backToSchedule} />}\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}